<!doctype html>
<html lang="en" xmlns:th="http://thymeleaf.org">
<head th:replace="partial/header :: head('Reset password')"></head>
<body>
<div class="container-fluid">
    <div th:replace="partial/header :: menu"></div>
    <div class="" style="max-width: 700px; margin: 0 auto">
        <div class="row text-center m-2">
            <h2>Reset Password</h2>
        </div>
        <form class="m-3 p-3 border border-primary rounded" method="post" th:action="@{/reset_password}">
            <div class="text-center my-3">
                <span>One step to access your account</span>
            </div>
            <input name="code" th:value="${code}" type="hidden">
            <div class="form-group row m-2">
                <label class="col-sm-4 col-form-label">New Password:</label>
                <div class="col-sm-8">
                    <input class="form-control" id="password" maxlength="15"
                           minlength="6" name="password" required="required" type="password"
                    />
                </div>
            </div>

            <div class="form-group row m-2">
                <label class="col-sm-4 col-form-label">Re-type New Password:</label>
                <div class="col-sm-8">
                    <input class="form-control" id="confirmPassword" maxlength="15"
                           minlength="6" required="required" type="password"
                    />
                </div>
            </div>
            <div class="text-center">
                <button class="btn btn-lg btn-success" type="submit">Change password</button>
            </div>
        </form>
    </div>
    <div th:replace="partial/modal :: modal_form"></div>
    <div th:replace="partial/footer :: footer"></div>
</div>
<div th:replace="partial/footer :: script"></div>
<script th:src="@{/js/common_form.js}"></script>
<script>
    const password = $('#password');
    const confirmPassword = $('#confirmPassword');
    function checkPasswordMatch() {
        if (password.val() !== confirmPassword.val()) {
            this.setCustomValidity("Passwords do not match.");
        } else {
            this.setCustomValidity('');
        }
    }
    confirmPassword.keyup(checkPasswordMatch);
</script>
</body>
</html>